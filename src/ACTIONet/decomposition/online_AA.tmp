#include "ACTIONet.h"

namespace ACTIONet {	
	
	// Solves the standard Archetypal Analysis (AA) problem using an online method
	// S and W0 have to be pre-norm2-column-normalized
	field<mat> run_onlinr_AA (mat &S, mat &W0, field<uvec> samples) {	
		uvec ub = unique(batches);
		
		mat W = W0;
		mat C = zeros(S.n_cols, W0.n_cols);
		mat H = zeros(W0.n_cols, S.n_cols);
		
		for(int t = 0; t < samples.n_elem; t++) {
			uvec idx = samples(t);
			
			Xt = S.cols(idx);			
			Ct = run_simplex_regression(W, Xt);		
			
			// Sufficient statistics
			A += Ct * trans(Ct);
			B += Xt * trans(Ct);
			


		}
		
	}
}
